<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Durian Leaf – Result Viewer</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <h1>
    Durian Leaf – Result Viewer
    <button id="themeToggle" class="btn secondary" style="margin-left:12px">Dark Mode</button>
  </h1>
  <div class="sub">โครงสร้างสี่ส่วน: (1) Top-3 โรค (2) ภาพ+กรอบใบไม้ (3) คำแนะนำ/ตัวยา/ปุ๋ย/ลิงก์ (4) Developer JSON</div>

  <!-- Image URL + Control -->
  <div class="row">
    <input id="imgUrl" type="url" placeholder="วาง Image URL เช่น https://.../leaf.jpg" />
    <button class="btn" id="loadBtn">Load Image</button>
    <button class="btn secondary" id="drawBtn">Draw Leaf Boxes</button>
  </div>

  <div class="grid">
    <!-- Left column: Section 1 + Section 2 -->
    <div class="stack">
      <!-- SECTION 1: Top-3 diseases -->
      <div class="panel" id="top3Panel">
        <h3>สรุปผล 3 อันดับแรก</h3>
        <div id="top3List"></div>
        <div class="muted">* แสดงจาก confidences ของคลาสโรคที่พบมากสุด 3 อันดับ</div>
      </div>

      <!-- SECTION 2: Image + bounding boxes -->
      <div class="panel">
        <h3>ภาพและกรอบตรวจจับใบไม้</h3>
        <div id="stage" class="stage"><img id="img" alt="Leaf image will appear here" /></div>
        <div class="muted" style="margin-top:8px">ระบบซ่อนหัวข้อ “1. ALGAL_LEAF_SPOT” แล้ว เหลือเฉพาะกรอบวัตถุบนภาพ</div>
      </div>
    </div>

    <!-- Right column: Section 3 + Section 4 -->
    <div class="stack">
      <!-- SECTION 3: Advice tabs -->
      <div class="panel">
        <h3>คำแนะนำ</h3>
        <div class="tabs">
          <button class="tab active" data-pane="advice">คำแนะนำ</button>
          <button class="tab" data-pane="chem">ตัวยา (สารออกฤทธิ์)</button>
          <button class="tab" data-pane="fert">ปุ๋ยที่แนะนำ</button>
          <button class="tab" id="drugLinkBtn">ลิงก์ตัวยา</button>
        </div>
        <div id="pane-advice" class="well"></div>
        <div id="pane-chem"   class="well hide"></div>
        <div id="pane-fert"   class="well hide"></div>
        <div class="muted" style="margin-top:6px">หากยังไม่มีข้อมูลจะแสดงข้อความพร้อมปุ่มลิงก์</div>
      </div>

      <!-- SECTION 4: Developer JSON -->
      <div class="panel">
        <h3 class="panel-title">
          <span>ผลลัพธ์ JSON (Developer)</span>
          <button id="toggleJson" class="btn secondary">Show/Hide JSON</button>
        </h3>
        <div class="note" style="margin-bottom:8px">วางผล JSON ที่ได้จากโมเดล (โครงแบบ roboflow/leaf_gate)</div>
        <textarea id="jsonInput" spellcheck="false" placeholder='{
  "leaf_gate": {
    "image": { "width": 224, "height": 224 },
    "predictions": [
      { "x": 199, "y": 196, "width": 50, "height": 56, "confidence": 0.69, "class": "leaf" },
      { "x": 40, "y": 30, "width": 70, "height": 60, "confidence": 0.82, "class": "LEAF_BLIGHT" }
    ]
  }
}'></textarea>
      </div>
    </div>
  </div>

  <script src="./advice.js"></script>
  <script src="./app.js"></script>
</body>
</html>
